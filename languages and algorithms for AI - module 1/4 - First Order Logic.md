# First order Logic

This is sometimes called *predicate calculus*. Unitl now, we could have these totally correct interpretations:![First order logic](./res/fol.png)

*Note that the dot between <img src="svgs/cbfb1b2a33b28eab8a3e59464768e810.svg?invert_in_darkmode" align=middle width=14.908688849999992pt height=22.465723500000017pt/> and <img src="svgs/2ec6e630f199f589a2402fdf3e0289d5.svg?invert_in_darkmode" align=middle width=8.270567249999992pt height=14.15524440000002pt/> means that the universal quantifier applies to what comes after the dot, i.e. the whole formula. It is alternative to using the parenthesis.*

We notice that different interpretations can lead to totally different meanings! We now want to understand which is the meaning of a formula written in FOL. The presence of variables makes this a little bit more different than propositional logic. We need to fix a **universe** (a domain from which we take the values, like numbers, graphs, apples...), an **interpretation** of function and predicate symbols (if I take a predicate, what is the meaning of this predicate? We have to fix a meaning for any predicate symbol) and a **valuation** for variables (a variable needs to have a fixed value).

Now, formalizing these concepts, an interpretation <img src="svgs/21fd4e8eecd6bdf1a4d3d6bd1fb8d733.svg?invert_in_darkmode" align=middle width=8.515988249999989pt height=22.465723500000017pt/> of <img src="svgs/813cd865c037c89fcdc609b25c465a05.svg?invert_in_darkmode" align=middle width=11.87217899999999pt height=22.465723500000017pt/> (which is a signature, i.e. set of functions+set of symbols) consists of:

- A universe <img src="svgs/813cd865c037c89fcdc609b25c465a05.svg?invert_in_darkmode" align=middle width=11.87217899999999pt height=22.465723500000017pt/>, a non empty set
- A function <img src="svgs/aa7e5558c31a0755bb8947bce6104e85.svg?invert_in_darkmode" align=middle width=105.36767175pt height=24.65753399999998pt/>, for every n-ary function symbol <img src="svgs/190083ef7a1625fbc75f243cffb9c96d.svg?invert_in_darkmode" align=middle width=9.81741584999999pt height=22.831056599999986pt/> of <img src="svgs/813cd865c037c89fcdc609b25c465a05.svg?invert_in_darkmode" align=middle width=11.87217899999999pt height=22.465723500000017pt/>
- A relation <img src="svgs/46da61b8e5779737f377c509213149dc.svg?invert_in_darkmode" align=middle width=72.63155954999999pt height=24.65753399999998pt/> for every n-ary predicate symbol <img src="svgs/2ec6e630f199f589a2402fdf3e0289d5.svg?invert_in_darkmode" align=middle width=8.270567249999992pt height=14.15524440000002pt/> of <img src="svgs/813cd865c037c89fcdc609b25c465a05.svg?invert_in_darkmode" align=middle width=11.87217899999999pt height=22.465723500000017pt/>

Once we have defined an interpretation, how can we interpret a term? We simply apply in a recursive way the definition of interpretation.

Our goal is being able to say, formally, when a formula is true or false. 

Given <img src="svgs/21fd4e8eecd6bdf1a4d3d6bd1fb8d733.svg?invert_in_darkmode" align=middle width=8.515988249999989pt height=22.465723500000017pt/> interpretation of <img src="svgs/813cd865c037c89fcdc609b25c465a05.svg?invert_in_darkmode" align=middle width=11.87217899999999pt height=22.465723500000017pt/>, <img src="svgs/1d0496971a2775f4887d1df25cea4f7e.svg?invert_in_darkmode" align=middle width=8.751954749999989pt height=14.15524440000002pt/> variable valuation, <img src="svgs/9def463f35e601fc8899c8b57b9eaf61.svg?invert_in_darkmode" align=middle width=56.605594649999986pt height=22.758598499999987pt/> which means that it satisfies <img src="svgs/e257acd1ccbe7fcb654708f1a866bfe9.svg?invert_in_darkmode" align=middle width=11.027402099999989pt height=22.465723500000017pt/>, is defined as follows:

![Interpretation of formulae](./res/interpretation-formulae.png)

We want to define, for example, when <img src="svgs/da3b83bb996516b60c4cd3e6bf444044.svg?invert_in_darkmode" align=middle width=39.96184334999999pt height=17.723762100000005pt/>, we need to know the meaning of the terms, for example <img src="svgs/eb01890419da1474433315c84a296ecd.svg?invert_in_darkmode" align=middle width=85.62375689999999pt height=21.18721440000001pt/>, then we need to check if these values belong to the interpretation: <img src="svgs/73a2f5e4354e87bb3885b31f6e4f4dc1.svg?invert_in_darkmode" align=middle width=65.13686024999998pt height=24.65753399999998pt/>?. 

Given a signature <img src="svgs/813cd865c037c89fcdc609b25c465a05.svg?invert_in_darkmode" align=middle width=11.87217899999999pt height=22.465723500000017pt/>, an interpretation <img src="svgs/21fd4e8eecd6bdf1a4d3d6bd1fb8d733.svg?invert_in_darkmode" align=middle width=8.515988249999989pt height=22.465723500000017pt/>, and a formula <img src="svgs/b8bc815b5e9d5177af01fd4d3d3c2f10.svg?invert_in_darkmode" align=middle width=12.85392569999999pt height=22.465723500000017pt/>, we say that:

- <img src="svgs/21fd4e8eecd6bdf1a4d3d6bd1fb8d733.svg?invert_in_darkmode" align=middle width=8.515988249999989pt height=22.465723500000017pt/> model of <img src="svgs/b8bc815b5e9d5177af01fd4d3d3c2f10.svg?invert_in_darkmode" align=middle width=12.85392569999999pt height=22.465723500000017pt/> or <img src="svgs/21fd4e8eecd6bdf1a4d3d6bd1fb8d733.svg?invert_in_darkmode" align=middle width=8.515988249999989pt height=22.465723500000017pt/> satisfies <img src="svgs/b8bc815b5e9d5177af01fd4d3d3c2f10.svg?invert_in_darkmode" align=middle width=12.85392569999999pt height=22.465723500000017pt/> (written <img src="svgs/f040ea0443914cd428d89bc7212d8014.svg?invert_in_darkmode" align=middle width=40.54777484999999pt height=22.758598499999987pt/>) when <img src="svgs/9def463f35e601fc8899c8b57b9eaf61.svg?invert_in_darkmode" align=middle width=56.605594649999986pt height=22.758598499999987pt/> for every possible valuation <img src="svgs/1d0496971a2775f4887d1df25cea4f7e.svg?invert_in_darkmode" align=middle width=8.751954749999989pt height=14.15524440000002pt/>
- <img src="svgs/21fd4e8eecd6bdf1a4d3d6bd1fb8d733.svg?invert_in_darkmode" align=middle width=8.515988249999989pt height=22.465723500000017pt/> is a model of theory <img src="svgs/2f118ee06d05f3c2d98361d9c30e38ce.svg?invert_in_darkmode" align=middle width=11.889314249999991pt height=22.465723500000017pt/> when <img src="svgs/21fd4e8eecd6bdf1a4d3d6bd1fb8d733.svg?invert_in_darkmode" align=middle width=8.515988249999989pt height=22.465723500000017pt/> is a model of each formula in <img src="svgs/2f118ee06d05f3c2d98361d9c30e38ce.svg?invert_in_darkmode" align=middle width=11.889314249999991pt height=22.465723500000017pt/>

A sentence S can be *valid (<img src="svgs/45c89159db096f127d4ec14d469ecc95.svg?invert_in_darkmode" align=middle width=38.72125124999999pt height=22.758598499999987pt/> for every <img src="svgs/21fd4e8eecd6bdf1a4d3d6bd1fb8d733.svg?invert_in_darkmode" align=middle width=8.515988249999989pt height=22.465723500000017pt/>), falsifiable (<img src="svgs/45c89159db096f127d4ec14d469ecc95.svg?invert_in_darkmode" align=middle width=38.72125124999999pt height=22.758598499999987pt/> for some <img src="svgs/21fd4e8eecd6bdf1a4d3d6bd1fb8d733.svg?invert_in_darkmode" align=middle width=8.515988249999989pt height=22.465723500000017pt/>), satisfiable(<img src="svgs/db9e096cf59c2a8b1283f992e30a68a1.svg?invert_in_darkmode" align=middle width=38.72125124999999pt height=22.648391699999998pt/> for some <img src="svgs/21fd4e8eecd6bdf1a4d3d6bd1fb8d733.svg?invert_in_darkmode" align=middle width=8.515988249999989pt height=22.465723500000017pt/>), unsatisfiable (<img src="svgs/db9e096cf59c2a8b1283f992e30a68a1.svg?invert_in_darkmode" align=middle width=38.72125124999999pt height=22.648391699999998pt/> for every <img src="svgs/21fd4e8eecd6bdf1a4d3d6bd1fb8d733.svg?invert_in_darkmode" align=middle width=8.515988249999989pt height=22.465723500000017pt/>)*.

## Important results

These are provided without proof, we trust those. The notion of logical consequence is the same we always see. A sentence/theory <img src="svgs/b1aadae6dafc7da339f61626db58e355.svg?invert_in_darkmode" align=middle width=16.15873379999999pt height=22.465723500000017pt/> is a *logical consequence* of a sentence/theory <img src="svgs/b48cd4fc1cc1b8c602c81734763b31f0.svg?invert_in_darkmode" align=middle width=16.15873379999999pt height=22.465723500000017pt/> if every model of <img src="svgs/b48cd4fc1cc1b8c602c81734763b31f0.svg?invert_in_darkmode" align=middle width=16.15873379999999pt height=22.465723500000017pt/> is also a model of <img src="svgs/b1aadae6dafc7da339f61626db58e355.svg?invert_in_darkmode" align=middle width=16.15873379999999pt height=22.465723500000017pt/>, i.e. <img src="svgs/7dd1b60ee505556103cbf500b39c20f2.svg?invert_in_darkmode" align=middle width=43.85258294999999pt height=22.758598499999987pt/> implies <img src="svgs/bb1678a9d67dfcb9d8fe5270f59f52b8.svg?invert_in_darkmode" align=middle width=43.85258294999999pt height=22.758598499999987pt/>.

Two sentences/theories are equivalent <img src="svgs/43c24ae4490ffb3a4e8e30d0250ffd2c.svg?invert_in_darkmode" align=middle width=16.43840384999999pt height=14.15524440000002pt/> if they are logical consequences of each other. Given that, **it is undecidable whether a FOL formula <img src="svgs/b8bc815b5e9d5177af01fd4d3d3c2f10.svg?invert_in_darkmode" align=middle width=12.85392569999999pt height=22.465723500000017pt/> is true under all possible interpretations, i.e. <img src="svgs/e3927c723bfdefa3c3c821b3a66bdf05.svg?invert_in_darkmode" align=middle width=47.51244794999999pt height=22.831056599999986pt/>.** We cannot list all the possible cases through the truthness table anymore, as we could do in propositional logic. In fact, we should now consider all possible universes of interpretations, domains... and this can't be done.

## Resolution

The idea is the same as for propositional logic: we take a theory, we negate the consequence that we want to prove, and we must show that this theory is unsatisfied. However, we have to transform FOL formulae in clauses, which is more complicated. Then we must define the resolution inference rule for FOL, which requires substitutions and unification.

In **Negation Normal Form**, if you have a negation, then the negation is in front of an atomic formula. So, for every sentence <img src="svgs/b8bc815b5e9d5177af01fd4d3d3c2f10.svg?invert_in_darkmode" align=middle width=12.85392569999999pt height=22.465723500000017pt/>, there is an equivalent sentence <img src="svgs/63f2f062daa3dd2c1317739735c8edda.svg?invert_in_darkmode" align=middle width=31.75970984999999pt height=22.465723500000017pt/> in the NNF.

### Clauses

A clause is a disjunction of literals(i.e. either an atomic formula or a negation of one). The part on the left of the arrow is called the **body**, the **head** is the part on the right. 

### Normalization

An arbitrary theory can be transformed into clausual form by converting to NNF, performing Skolemization (preserves satisfiability) to eliminate all the existential quantifiers, then convert the resulting theory, still in NNF, to clausal form, by moving conjunctions and universal quantifiers outwards. 

### Substitution

The **substitution** is something you may already have seen in functional languages. It is simply a mapping to a function which has the domain <img src="svgs/76105ebc974ce8a02de91bcaf0d6d25f.svg?invert_in_darkmode" align=middle width=11.424730349999988pt height=22.465723500000017pt/> set of all variables, codomain <img src="svgs/6937e14ec122765a9d014f2cbcf4fcfe.svg?invert_in_darkmode" align=middle width=13.13115539999999pt height=22.465723500000017pt/> all the possible terms, modifying a finite number of variables in the sense that it replaces the finite number of variables by a finite number of terms.

### Unifiers

<img src="svgs/8cda31ed38c6d59d14ebefa440099572.svg?invert_in_darkmode" align=middle width=9.98290094999999pt height=14.15524440000002pt/> is a unifier for <img src="svgs/399bb658a29dcc98c93883f16e5d669c.svg?invert_in_darkmode" align=middle width=59.119196399999986pt height=14.15524440000002pt/> if <img src="svgs/9b3454430b6967fad79ceeca97300dc9.svg?invert_in_darkmode" align=middle width=109.13038949999999pt height=14.15524440000002pt/>

<img src="svgs/399bb658a29dcc98c93883f16e5d669c.svg?invert_in_darkmode" align=middle width=59.119196399999986pt height=14.15524440000002pt/> is **unifiable** if a unifier exists. The most general unifier (mgu) exists if every unifier <img src="svgs/0fe1677705e987cac4f589ed600aa6b3.svg?invert_in_darkmode" align=middle width=9.046852649999991pt height=14.15524440000002pt/> for <img src="svgs/34072df044735a62764ab8774621d57f.svg?invert_in_darkmode" align=middle width=7.654137149999991pt height=19.415200200000008pt/> is instance of <img src="svgs/8cda31ed38c6d59d14ebefa440099572.svg?invert_in_darkmode" align=middle width=9.98290094999999pt height=14.15524440000002pt/>, i.e. <img src="svgs/a40cba90e133f4dc211467ccd9d75bae.svg?invert_in_darkmode" align=middle width=49.44622979999999pt height=14.15524440000002pt/> for some <img src="svgs/6dec54c48a0438a5fcde6053bdb9d712.svg?invert_in_darkmode" align=middle width=8.49888434999999pt height=14.15524440000002pt/>

